(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{189:function(e,t,n){"use strict";n.r(t);var o=n(11),i=n.n(o),r=n(5),l=n.n(r),s=n(0),c=n.n(s),a=n(273),d=n(267),u=n(185),f=n(24),h=n.n(f),j=n(2),g=n(33),b=n(17),m=n(4),O=n(8),x=n(21),y=n(274),w=n(1);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}("kfc"),S={windowWidth:x.default.get("window").width,windowHeight:x.default.get("window").height,token:C,host:"",baseURL:"/api/v1/"},I=c.a.createContext(),W=function(e){var t=e.children,n=Object(s.useState)(S),o=l()(n,2),i=o[0],r=o[1];function c(){r(v(v({},i),{},{windowWidth:x.default.get("window").width,windowHeight:x.default.get("window").height}))}Object(s.useEffect)((function(){return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}),[]);var a=O.default.create({homeContainer:{width:i.windowWidth>1e3?1e3:i.windowWidth,paddingLeft:i.windowWidth>1e3?"auto":5,paddingRight:i.windowWidth>1e3?"auto":5,paddingTop:5,height:i.windowHeight-100,marginTop:10,marginLeft:"auto",marginRight:"auto",borderColor:"green",borderWidth:3,minHeight:i.windowHeight-100,height:"auto"},homeCategories:{flexDirection:"row",borderColor:"violet",borderWidth:2,justifyContent:"space-around",marginTop:10},homeCategory:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:.2*i.windowWidth,maxWidth:200,height:.1*i.windowWidth,maxHeight:200,borderColor:"lightblue",borderWidth:1,borderRadius:10},homeCategoryChosen:{flexDirection:"column",justifyContent:"center",alignItems:"center",borderWidth:2,borderRadius:8,width:.2*i.windowWidth,height:.1*i.windowWidth,borderColor:"orange"},homeSingleItemCategory:{width:.2*i.windowWidth,maxWidth:200,height:.2*i.windowWidth,maxHeight:200,borderColor:"lightblue",borderWidth:1,borderRadius:10},homeSingleItemCategoryChosen:{borderWidth:2,borderRadius:8,width:.2*i.windowWidth,height:.2*i.windowWidth,borderColor:"orange"},homeFoodListCover:{marginTop:10},homeFoodList:{flexDirection:"row",flexWrap:"wrap",borderWidth:2,borderColor:"Crimson",justifyContent:"center"},dishContainer:{borderColor:"green",borderWidth:1,width:.32*i.windowWidth,height:"fit-content",paddingLeft:i.windowWidth>1e3?"2.5%":.033*i.windowWidth,paddingRight:i.windowWidth>1e3?"2.5%":.033*i.windowWidth,maxWidth:240,flexDirection:"column",flexGrow:1,marginBottom:20},dishName:{borderWidth:1,borderColor:"chartreuse",overflow:"hidden",wordWrap:"break-word",hyphens:"auto",width:"100%",height:18,fontSize:14},dishImageContainer:{width:"100%",aspectRatio:1},DishImage:{flexGrow:1,borderRadius:10,borderColor:"red",borderWidth:1,borderRadius:10,marginRight:10,resizeMode:"stretch",minHeight:50,width:"100%",height:"100%"},dishInfo:{borderColor:"red",borderWidth:1},dishInfoHide:{borderWidth:1,borderColor:"yellowBlanchedAlmond",height:i.windowWidth>1e3?.04*i.windowWidth:.15*i.windowWidth,maxHeight:60,overflow:"hidden",wordWrap:"break-word",textOverflow:"ellipsis",hyphens:"auto"},dishInfoShow:{borderWidth:1,borderColor:"yellowBlanchedAlmond",minHeight:i.windowWidth>1e3?.04*i.windowWidth:.15*i.windowWidth},customBtn:{marginTop:8,alignSelf:"center",width:"70%",height:25,borderWidth:2,borderColor:"rgba(var(--b6a, 219, 219, 219), 1)"},customOrder:{width:"100%"},customName:{fontStyle:"italic",fontSize:"1.333333333333333em",color:"rgb(232, 230, 227)",fontWeight:"bold",wordWrap:"break-word"},customList:{},dealImageContainer:{width:i.windowWidth,height:.45*i.windowWidth},dealImage:{width:"100%",aspectRatio:2,resizeMode:"stretch"}}),d=y.default.create({baseURL:i.baseURL}),u=y.default.create({baseURL:i.baseURL});return u.interceptors.request.use((function(e){return e.headers.common.Authorization="Token "+C,e}),(function(e){return Promise.reject(e)})),Object(w.jsx)(I.Provider,{value:v(v({},i),{},{style:a,customAxios:d,authFetch:u,changeImagePath:function(e){var t=""+i.host;return(e||"").includes(t)?e:t+e}}),children:t})},T=function(){return Object(s.useContext)(I)},D=function(e){var t=T().style,n=e.category,o=e.setShowSingleItems,i=e.categoryChosen,r=e.setCategoryChosen;return Object(w.jsx)(b.default,{onPress:function(){r(n.id),o(!1)},style:i===n.id?t.homeCategoryChosen:t.homeCategory,children:Object(w.jsx)(m.default,{children:n.field.replace("combo-","").toUpperCase()})})},P=n(35),k=function(e){var t=T(),n=t.style,o=t.changeImagePath,i=e.singleItemCategory,r=e.categoryChosen,l=e.setCategoryChosen;return Object(w.jsx)(b.default,{onPress:function(){l(i.id)},children:Object(w.jsx)(P.default,{source:{uri:o(i.image_url)},style:i.id===r?n.homeSingleItemCategoryChosen:n.homeSingleItemCategory})})},E=function(e){var t=T().style,n=e.categories,o=e.categoryChosen,i=e.setCategoryChosen;return Object(w.jsx)(j.default,{style:t.homeCategories,children:n.filter((function(e){return function(e){if(!0===Boolean(e.field.startsWith("singleItems-")))return e}(e)})).map((function(e){return Object(w.jsx)(k,{singleItemCategory:e,categoryChosen:o,setCategoryChosen:i},e.id)}))})},R=n(264),z=n(16),A=n.n(z),B=n(263),H=n(28),N=function(e){var t,n,o,i=e.categoryDish,r=T(),c=r.style,a=r.customAxios,d=r.changeImagePath,u=Object(H.useNavigation)(),f=Object(s.useState)([]),h=l()(f,2),g=h[0],O=h[1],x=Object(s.useState)({}),y=l()(x,2),p=y[0],v=y[1],C=Object(s.useState)(!1),S=l()(C,2),I=S[0],W=S[1],D=Object(s.useState)(!1),k=l()(D,2),E=k[0],R=k[1],z=Object(s.useState)(!0),N=l()(z,2),L=N[0],F=N[1];function _(e){var t="";try{for(var n=0;n<e.length;n+=1)t+="/"+e[n].name}finally{return"/"==t[0]?t.substr(1,t.length):t}}function V(){u.navigate("Custom",{images:g,categoryDish:i,dishItems:p})}return Object(s.useEffect)((function(){W(!0),console.log("categoryDish",i),function(e){["singleItems-desserts-drinks","singleItems-snacks"].includes(e.category__field)&&R(!0)}(i);var e="item_images/"+i.id+"/";a(e).then((function(e){return e.data})).then((function(e){O(e),console.log("images",e)}));var t="dish_items/"+i.id+"/";a(t).then((function(e){return e.data})).then((function(e){console.log("dishItems:",e),v(e)})).finally((function(){W(!1)}))}),[]),I?Object(w.jsx)(j.default,{style:c.homeFoodContainer,children:Object(w.jsx)(m.default,{children:"Data is loading..."})}):Object(w.jsxs)(j.default,{style:c.dishContainer,children:[Object(w.jsx)(b.default,{style:c.dishImageContainer,onPress:V,children:Object(w.jsx)(P.default,{style:c.DishImage,source:function(){var e;return e=void 0===g||0===g.length?"":g[0].image_url,{uri:d(e)}}()})}),Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{numberOfLines:1,style:c.dishName,children:i.name}),Object(w.jsx)(m.default,{children:i.price})]}),Object(w.jsxs)(j.default,{style:L?c.dishInfo:[c.dishInfo,{height:"fit-content"}],children:[E||Object(w.jsxs)(j.default,{style:L?c.dishInfoHide:c.dishInfoShow,children:[null==(t=p.selections)?void 0:t.filter((function(e){return"singleItems-desserts-drinks"!=e.default.category__field})).map((function(e,t){return Object(w.jsx)(m.default,{children:_(e.choices)},t)})),null==(n=p.singleItems)?void 0:n.map((function(e,t){return Object(w.jsx)(m.default,{children:e.name},t)})),null==(o=p.selections)?void 0:o.filter((function(e){return"singleItems-desserts-drinks"==e.default.category__field})).map((function(e,t){return Object(w.jsx)(m.default,{children:e.default.name},t)}))]}),Object(w.jsx)(b.default,{style:{alignSelf:"center"},onPress:function(){return F(!L)},children:Object(w.jsx)(B.default,{name:"keyboard-arrow-down",size:24,color:"black",style:L?{transform:"rotate(0deg)",transitionDuration:"500ms"}:{transform:"rotate(180deg)",transitionDuration:"500ms"}})}),Object(w.jsx)(b.default,{style:c.customBtn,onPress:V,children:Object(w.jsx)(m.default,{style:{color:"green",textAlign:"center"},children:"Cumtom"})}),Object(w.jsx)(b.default,{style:c.customBtn,onPress:function(){var e;try{var t,n=null==(t=p.selections)?void 0:t.map((function(e){return e.default})),o=p.singleItems;e=[].concat(A()(n),A()(o))}finally{u.navigate("Cart",{dish:{id:Date.now(),categoryDish:i,itemsChosen:e,dishItems:p,images:g,price:i.price,amount:1}})}},children:Object(w.jsx)(m.default,{style:{color:"green",textAlign:"center"},children:"Order"})})]})]})},L=function(e){var t=T().style,n=e.categoryDishes;return Object(w.jsxs)(j.default,{style:t.homeFoodListCover,children:[Object(w.jsx)(R.default,{name:"downcircleo",size:24,color:"black",style:{marginLeft:"auto",marginRight:"auto"}}),Object(w.jsx)(j.default,{style:{marginTop:10},children:Object(w.jsx)(j.default,{style:t.homeFoodList,children:n.map((function(e){return Object(w.jsx)(N,{categoryDish:e},e.id)}))})})]})},F=function(){var e=T(),t=e.style,n=e.customAxios,o=Object(s.useState)([]),i=l()(o,2),r=i[0],c=i[1],a=Object(s.useState)([]),d=l()(a,2),u=d[0],f=d[1],g=Object(s.useState)(0),O=l()(g,2),x=O[0],y=O[1],p=Object(s.useState)(!1),v=l()(p,2),C=v[0],S=v[1];var I=function(){var e=h()((function*(){var e=(yield n("get_categories/")).data;console.log("get_categories:",e),c(e),function(e){new Promise((function(t,n){var o=e.find((function(e){return e.field.startsWith("combo-")}));o?t(o):n(Error("There are no combo categoreis"))})).then((function(e){console.log("It worked!",e.id),y(e.id)})).catch((function(e){console.log("It failed!",e)})),console.log()}(e)}));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){console.log("categories useEffect"),I()}),[]),Object(s.useEffect)((function(){console.log("categories useEffect1"),0!==x&&n("category_items/"+x).then((function(e){return e.data})).then((function(e){f(e)}))}),[x]),Object(w.jsxs)(j.default,{style:{width:"100%",borderColor:"gray",borderWidth:1},children:[Object(w.jsxs)(j.default,{style:[t.homeCategories,{alignContent:"stretch"}],children:[r.filter((function(e){return function(e){if(!0===Boolean(e.field.startsWith("combo-")))return e}(e)})).map((function(e){return Object(w.jsx)(D,{category:e,setShowSingleItems:S,categoryChosen:x,setCategoryChosen:y},e.id)})),Object(w.jsx)(b.default,{onPress:function(){S(!0),new Promise((function(e,t){var n=r.find((function(e){return e.field.startsWith("singleItems-")}));n?e(n):t(Error("There are no combo categoreis"))})).then((function(e){console.log("It worked!",e.id),y(e.id)})).catch((function(e){console.log("It failed!",e)})),console.log()},style:C?t.homeCategoryChosen:t.homeCategory,children:Object(w.jsx)(m.default,{children:"SINGLE ITEMS"})})]}),C&&Object(w.jsx)(E,{categories:r,categoryChosen:x,setCategoryChosen:y}),console.log("categoryDishes:",u),Object(w.jsx)(L,{categoryDishes:u})]})};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=x.default.get("window").width>1e3?1e3:x.default.get("window").width,U={windowWidth:G,windowHeight:.4*G},M=c.a.createContext(),J=function(e){var t=e.children,n=Object(s.useState)(U),o=l()(n,2),i=o[0],r=o[1];function c(){var e=x.default.get("window").width>1e3?1e3:x.default.get("window").width,t=.4*G;r(V(V({},i),{},{windowWidth:e,windowHeight:t}))}Object(s.useEffect)((function(){return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}),[]);var a=O.default.create({container:{maxHheight:300,borderWidth:2,borderColor:"violet"},scroll:{height:"100%",maxHheight:300},imageContainer:{width:i.windowWidth,aspectRatio:2},image:{width:"100%",height:"100%",resizeMode:"stretch"},pagination:{position:"absolute",bottom:0,flexDirection:"row",alignSelf:"center"},dots:{color:"white",margin:3,fontSize:i.windowWidth/30},dotActive:{color:"green",margin:3,fontSize:i.windowWidth/30}});return Object(w.jsx)(M.Provider,{value:V(V({},i),{},{style:a}),children:t})},K=function(e){var t=T().changeImagePath,n=e.deals,o=Object(s.useContext)(M),i=o.style,r=o.windowWidth,c=Object(H.useNavigation)(),a=Object(s.useState)(0),d=l()(a,2),u=d[0],f=d[1],h=Object(s.useRef)(),O=null;function x(){u===n.length-1?h.current.scrollTo({x:0,animated:!0}):h.current.scrollTo({x:r*(u+1),animated:!0})}return Object(s.useEffect)((function(){return O=setTimeout(x,2e3),function(){return clearTimeout(O)}})),Object(w.jsxs)(j.default,{style:i.container,children:[Object(w.jsx)(g.default,{ref:h,style:i.scroll,pagingEnabled:!0,horizontal:!0,showsHorizontalScrollIndicator:!1,onScroll:function(e){var t=Math.round(e.nativeEvent.contentOffset.x/r);u!==t&&f(t)},scrollEventThrottle:r,onScrollBeginDrag:function(){clearTimeout(O)},onScrollEndDrag:function(){O=setTimeout(O,5e3)},overScrollMode:"never",children:n.map((function(e){return Object(w.jsx)(b.default,{style:i.imageContainer,onPress:function(){return function(e){c.navigate("Deals",{deal:e})}(e)},children:Object(w.jsx)(P.default,{source:{uri:t(e.image_url)},style:i.image})},e.id)}))}),Object(w.jsx)(j.default,{style:i.pagination,children:n.map((function(e,t){return Object(w.jsx)(m.default,{style:t===u?i.dotActive:i.dots,children:"\u2b24"},t)}))})]})},Y=c.a.createContext(),q=function(e){var t=e.navigation,n=T(),o=n.style,i=n.customAxios,r=Object(s.useState)([]),c=l()(r,2),a=c[0],d=c[1],u=function(){var e=h()((function*(){var e=(yield i("get_deals/")).data;d(e),console.log("deals",e)}));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){u()}),[]),Object(w.jsx)(Y.Provider,{value:{},children:Object(w.jsxs)(g.default,{style:o.homeContainer,showsVerticalScrollIndicator:!1,children:[Object(w.jsx)(j.default,{children:Object(w.jsx)(J,{children:Object(w.jsx)(K,{deals:a})})}),Object(w.jsx)(F,{navigation:t})]})})},X=function(e){e.navigation;var t=e.route,n=T(),o=n.style,i=n.changeImagePath,r=t.params.deal;return Object(s.useEffect)((function(){console.log("deal",r)}),[]),Object(w.jsxs)(g.default,{showsVerticalScrollIndicator:!1,children:[Object(w.jsx)(m.default,{children:r.title}),Object(w.jsx)(m.default,{children:r.description}),Object(w.jsx)(m.default,{children:r.hashtag}),Object(w.jsx)(j.default,{style:o.dealImageContainer,children:Object(w.jsx)(P.default,{style:o.dealImage,source:{uri:i(r.image_url)}})})]})},Z=n(45),Q=n(265),$=function(e){var t=T(),n=t.style,o=t.changeImagePath,i=e.selection,r=e.choice,l=e.chosen,s=e.itemsChosen,c=e.setItemsChosen;function a(){console.log(r.selectionId);var e=JSON.parse(JSON.stringify(s)),t=null==e?void 0:e.filter((function(e){return e.selectionId!=r.selectionId})),n=null==e?void 0:e.filter((function(e){return e.selectionId==r.selectionId}));try{console.log("otherSelections",t),console.log("changedSelection",n),n.shift(),n.push(r)}finally{console.log("newItemsChosen",e),c([].concat(A()(t),A()(n)))}}return Object(w.jsx)(j.default,{style:n.dishContainer,children:r.image__image?Object(w.jsxs)(b.default,{onPress:a,children:[Object(w.jsx)(j.default,{style:n.dishImageContainer,children:Object(w.jsx)(P.default,{style:n.DishImage,source:o(r.image__image_url)})}),Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{numberOfLines:1,style:{width:"100%",maxHeight:18,fontSize:14},children:r.name}),Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[l.includes(r.id)?Object(w.jsx)(Q.default,{name:"check",size:24,color:"green"}):Object(w.jsx)(Q.default,{name:"check",size:24,color:"black"}),i.default.id==r.id?Object(w.jsx)(m.default,{children:"Included"}):Object(w.jsx)(m.default,{children:r.price-i.default.price>0?"+"+(r.price-i.default.price)+"\u0111":"+0\u0111"})]}),1!=i.default.amount&&Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsx)(b.default,{onPress:function(){console.log(r.selectionId);var e=JSON.parse(JSON.stringify(s));if(r.id!=i.default.id&&r.selectionId==i.default.selectionId){var t=null==e?void 0:e.find((function(e){return JSON.stringify(e)==JSON.stringify(r)}));console.log("choice",r);var n=e.indexOf(t);try{e.splice(n,1),e.push(i.default)}finally{console.log("newItemsChosen",e),c(A()(e))}}},children:Object(w.jsx)(m.default,{children:"\u2296"})}),Object(w.jsx)(m.default,{style:{marginLeft:5,marginRight:5},children:(null==l?void 0:l.filter((function(e){return e==r.id}))).length}),Object(w.jsx)(b.default,{onPress:a,children:Object(w.jsx)(m.default,{children:"\u2295"})})]})]})]}):Object(w.jsxs)(b.default,{onPress:a,style:{flexDirection:"row"},children:[l.includes(r.id)?Object(w.jsx)(Q.default,{name:"check",size:24,color:"green"}):Object(w.jsx)(Q.default,{name:"check",size:24,color:"black"}),Object(w.jsx)(m.default,{numberOfLines:3,children:r.name})]})})},ee=function(e){var t,n=e.selection,o=e.itemsChosen,i=e.setItemsChosen,r=Object(s.useState)([]),c=l()(r,2),a=c[0],d=c[1];return Object(s.useEffect)((function(){var e=null==o?void 0:o.filter((function(e){return e.selectionId==n.default.selectionId})).map((function(e){return e.id}));d(e),console.log("chosen",e)}),[o]),Object(w.jsx)(j.default,{style:{flexDirection:"row",flexWrap:"wrap"},children:null==(t=n.choices)?void 0:t.map((function(e){return Object(w.jsx)($,{selection:n,choice:e,chosen:a,setChosen:d,itemsChosen:o,setItemsChosen:i},e.id)}))})};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=x.default.get("window").width>1e3?1e3:x.default.get("window").width,ie={windowWidth:oe,windowHeight:.4*oe},re=c.a.createContext(),le=function(e){var t=e.children,n=Object(s.useState)(ie),o=l()(n,2),i=o[0],r=o[1];function c(){var e=x.default.get("window").width>1e3?1e3:x.default.get("window").width,t=.4*oe;r(ne(ne({},i),{},{windowWidth:e,windowHeight:t}))}Object(s.useEffect)((function(){return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}),[]);var a=O.default.create({container:{maxHheight:300,borderWidth:2,borderColor:"violet"},scroll:{height:"100%",maxHheight:300},imageContainer:{width:i.windowWidth,aspectRatio:2},image:{width:"100%",height:"100%",resizeMode:"stretch"},pagination:{position:"absolute",bottom:0,flexDirection:"row",alignSelf:"center"},dots:{color:"white",margin:3,fontSize:i.windowWidth/30},dotActive:{color:"green",margin:3,fontSize:i.windowWidth/30}});return Object(w.jsx)(re.Provider,{value:ne(ne({},i),{},{style:a}),children:t})},se=function(e){var t=e.imageArray,n=T().changeImagePath,o=Object(s.useContext)(re),i=o.style,r=o.windowWidth,c=(o.windowHeight,Object(s.useState)(0)),a=l()(c,2),d=a[0],u=a[1],f=Object(s.useRef)(),h=null;function b(){d===t.length-1?f.current.scrollTo({x:0,animated:!0}):f.current.scrollTo({x:r*(d+1),animated:!0})}return Object(s.useEffect)((function(){return h=setTimeout(b,2e3),function(){return clearTimeout(h)}})),Object(w.jsxs)(j.default,{style:i.container,children:[Object(w.jsx)(g.default,{ref:f,style:i.scroll,pagingEnabled:!0,horizontal:!0,showsHorizontalScrollIndicator:!1,onScroll:function(e){var t=Math.round(e.nativeEvent.contentOffset.x/r);d!==t&&u(t)},scrollEventThrottle:r,onScrollBeginDrag:function(){clearTimeout(h)},onScrollEndDrag:function(){h=setTimeout(h,5e3)},overScrollMode:"never",children:null==t?void 0:t.map((function(e,t){return Object(w.jsx)(j.default,{style:i.imageContainer,children:Object(w.jsx)(P.default,{source:{uri:n(e)},style:i.image})},t)}))}),Object(w.jsx)(j.default,{style:i.pagination,children:null==t?void 0:t.map((function(e,t){return Object(w.jsx)(m.default,{style:t===d?i.dotActive:i.dots,children:"\u2b24"},t)}))})]})},ce=c.a.createContext(),ae=function(e){var t,n,o,i=e.navigation,r=e.route,c=T(),a=c.style,d=c.changeImagePath,u=r.params,f=u.images,h=u.categoryDish,O=u.dishItems,x=Object(s.useState)([]),y=l()(x,2),p=y[0],v=y[1],C=Object(s.useState)(1),S=l()(C,2),I=S[0],W=S[1],D=Object(s.useState)([]),P=l()(D,2),k=P[0],E=P[1],R=Object(s.useState)(0),z=l()(R,2),B=z[0],H=z[1];return Object(s.useEffect)((function(){var e=f.map((function(e){return d(e.image_url)}));v(e),console.log("singleItems",O.singleItems)}),[f]),Object(s.useEffect)((function(){var e,t=null==(e=O.selections)?void 0:e.map((function(e){return e.default})),n=O.singleItems;console.log("singleItemDefault",n);try{var o=null==t?void 0:t.find((function(e){return e.amount>1}));if(void 0!==o)for(var i=0;i<o.amount-1;i+=1)t.push(o)}finally{console.log("selectionsDefault",t),E([].concat(A()(t.sort()),A()(n)))}}),[O]),Object(s.useEffect)((function(){var e=null==h?void 0:h.price;try{null==k||k.map((function(t){Object.keys(t).includes("due")&&(e+=t.due)}))}finally{H(e)}}),[k,h]),Object(w.jsxs)(ce.Provider,{value:{setItemsChosen:E,itemsChosen:k},children:[console.log("itemsChosen",k),Object(w.jsxs)(g.default,{style:a.homeContainer,showsVerticalScrollIndicator:!1,children:[Object(w.jsxs)(j.default,{style:a.orderTotal,children:[Object(w.jsx)(le,{children:Object(w.jsx)(se,{imageArray:p})}),Object(w.jsxs)(j.default,{children:[Object(w.jsxs)(m.default,{style:a.customName,children:[I,"X ",h.name.toUpperCase()]}),Object(w.jsx)(j.default,{children:k.map((function(e,t){return Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsxs)(m.default,{style:{flexGrow:1},children:["\u30fb",e.name]}),Object(w.jsxs)(m.default,{children:["+",e.due||0," \u0111"]})]},t)}))}),Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsxs)(j.default,{style:{flexDirection:"row",flexGrow:1},children:[Object(w.jsx)(b.default,{onPress:function(){I>1&&W(I-1)},children:Object(w.jsx)(m.default,{style:{transform:"scale(1.5)"},children:"\u2296"})}),Object(w.jsx)(Z.default,{value:I,onChangeText:W,style:{width:30,fontSize:18,paddingLeft:5,paddingRight:5}}),Object(w.jsx)(b.default,{onPress:function(){W(I+1)},children:Object(w.jsx)(m.default,{style:{transform:"scale(1.5)"},children:"\u2295"})})]}),Object(w.jsx)(m.default,{style:{fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600,alignSelf:"center"},children:I*B})]})]}),Object(w.jsxs)(j.default,{children:[Object(w.jsxs)(j.default,{style:{flexDirection:"row",paddingTop:10},children:[Object(w.jsx)(m.default,{style:{flexGrow:1,fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600},children:"ORDER TOTAL"}),Object(w.jsx)(m.default,{style:{fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600,color:"red"},children:I*B})]}),Object(w.jsxs)(j.default,{children:[Object(w.jsx)(b.default,{style:a.customBtn,onPress:function(){i.goBack(),i.navigate("Cart",{dish:{id:Date.now(),categoryDish:h,itemsChosen:k,dishItems:O,images:f,price:B,amount:I}})},children:Object(w.jsx)(m.default,{style:{color:"green",textAlign:"center",borderRadius:5},children:"ADD TO CART"})}),Object(w.jsx)(b.default,{style:a.customBtn,onPress:function(){i.goBack()},children:Object(w.jsx)(m.default,{style:{color:"green",textAlign:"center",borderRadius:5},children:"BACK TO MENU"})})]})]})]}),Object(w.jsx)(j.default,{children:Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{children:h.name}),null==(t=O.selections)?void 0:t.map((function(e,t){if("singleItems-desserts-drinks"!==e.default.category__field)return Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{children:"SELECT 1 IN OPTIONS BELOW"}),Object(w.jsx)(ee,{selection:e,itemsChosen:k,setItemsChosen:E})]},t)})),null==(n=O.singleItems)?void 0:n.map((function(e){return Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsx)(Q.default,{name:"check",size:24,color:"green"}),Object(w.jsx)(m.default,{children:e.name})]},e.id)})),Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{children:"UP SIZE DESSERTS DRINKS"}),null==(o=O.selections)?void 0:o.map((function(e,t){if("singleItems-desserts-drinks"===e.default.category__field)return Object(w.jsx)(ee,{selection:e,itemsChosen:k,setItemsChosen:E},t)}))]})]})})]})]})},de=c.a.createContext(),ue=function(e){var t,n,o,i=e.navigation,r=e.route,c=T(),a=c.style,d=c.changeImagePath,u=r.params.order,f=Object(s.useState)([]),h=l()(f,2),O=h[0],x=h[1],y=Object(s.useState)(1),p=l()(y,2),v=p[0],C=p[1],S=Object(s.useState)([]),I=l()(S,2),W=I[0],D=I[1],P=Object(s.useState)(0),k=l()(P,2),E=k[0],R=k[1];return Object(s.useEffect)((function(){console.log(u.images);var e=u.images.map((function(e){return d(e.image_url)}));x(e),console.log("singleItems",u.dishItems.singleItems),D(u.itemsChosen),R(u.price),C(u.amount)}),[u]),Object(s.useEffect)((function(){var e=null==u?void 0:u.categoryDish.price;try{null==W||W.map((function(t){Object.keys(t).includes("due")&&(e+=t.due)}))}finally{R(e)}}),[W,u]),null==u?Object(w.jsx)(j.default,{children:Object(w.jsx)(m.default,{children:"Loading..."})}):Object(w.jsxs)(de.Provider,{value:{setItemsChosen:D,itemsChosen:W},children:[console.log("itemsChosen",W),Object(w.jsxs)(g.default,{style:a.homeContainer,showsVerticalScrollIndicator:!1,children:[Object(w.jsxs)(j.default,{style:a.orderAmount,children:[Object(w.jsx)(le,{children:Object(w.jsx)(se,{imageArray:O})}),Object(w.jsxs)(j.default,{children:[Object(w.jsxs)(m.default,{style:a.customName,children:[v,"X ",u.categoryDish.name.toUpperCase()]}),Object(w.jsx)(j.default,{children:W.map((function(e,t){return Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsxs)(m.default,{style:{flexGrow:1},children:["\u30fb",e.name]}),Object(w.jsxs)(m.default,{children:["+",e.due||0]})]},t)}))}),Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsxs)(j.default,{style:{flexDirection:"row",flexGrow:1},children:[Object(w.jsx)(b.default,{onPress:function(){v>1&&C(v-1)},children:Object(w.jsx)(m.default,{style:{transform:"scale(1.5)"},children:"\u2296"})}),Object(w.jsx)(Z.default,{value:v,onChangeText:C,style:{width:30,fontSize:18,paddingLeft:5,paddingRight:5}}),Object(w.jsx)(b.default,{onPress:function(){C(v+1)},children:Object(w.jsx)(m.default,{style:{transform:"scale(1.5)"},children:"\u2295"})})]}),Object(w.jsx)(m.default,{style:{fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600,alignSelf:"center"},children:v*E})]})]}),Object(w.jsxs)(j.default,{children:[Object(w.jsxs)(j.default,{style:{flexDirection:"row",paddingTop:10},children:[Object(w.jsx)(m.default,{style:{flexGrow:1,fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600},children:"ORDER TOTAL"}),Object(w.jsx)(m.default,{style:{fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600,color:"red"},children:v*E})]}),Object(w.jsxs)(j.default,{children:[Object(w.jsxs)(j.default,{children:[Object(w.jsx)(b.default,{style:a.customBtn,onPress:function(){i.goBack(),i.navigate("Cart",{dish:{id:u.id,categoryDish:u.categoryDish,itemsChosen:W,dishItems:u.dishItems,images:u.images,price:E,amount:v}})},children:Object(w.jsx)(m.default,{style:{color:"green",textAlign:"center"},children:"UPDATE CART"})}),Object(w.jsx)(b.default,{style:a.customBtn,onPress:function(){i.navigate("Home")},children:Object(w.jsx)(m.default,{style:{color:"green",textAlign:"center"},children:"ADD MORE COMBO"})})]}),Object(w.jsx)(b.default,{style:a.customBtn,onPress:function(){i.goBack()},children:Object(w.jsx)(m.default,{style:{color:"green",textAlign:"center"},children:"BACK TO CART"})})]})]})]}),Object(w.jsxs)(j.default,{children:[Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{children:u.categoryDish.name}),null==(t=u.dishItems.selections)?void 0:t.map((function(e,t){if("singleItems-desserts-drinks"!==e.default.category__field)return Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{children:"SELECT 1 IN OPTIONS BELOW"}),Object(w.jsx)(ee,{selection:e,itemsChosen:W,setItemsChosen:D})]},t)})),null==(n=u.dishItems.singleItems)?void 0:n.map((function(e,t){return Object(w.jsxs)(j.default,{children:[Object(w.jsx)(Q.default,{name:"check",size:24,color:"green"}),Object(w.jsx)(m.default,{children:e.name})]},e.id)})),Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{children:"UP SIZE DESSERTS DRINKS"}),null==(o=u.dishItems.selections)?void 0:o.map((function(e,t){if("singleItems-desserts-drinks"===e.default.category__field)return Object(w.jsx)(ee,{selection:e,itemsChosen:W,setItemsChosen:D},t)}))]})]}),Object(w.jsx)(j.default,{})]})]})]})},fe=n(266),he=Object(fe.default)();var je=function(){return Object(w.jsxs)(he.Navigator,{children:[Object(w.jsx)(he.Screen,{name:"Home",component:q}),Object(w.jsx)(he.Screen,{name:"Deals",component:X}),Object(w.jsx)(he.Screen,{name:"Custom",component:ae}),Object(w.jsx)(he.Screen,{name:"EditCart",component:ue})]})},ge=n(277),be=(c.a.createContext(),function(e){var t=T(),n=t.style,o=t.baseURL,i=t.customAxios,r=e.modalVisible,c=e.setModalVisible,a=e.navigation,d=e.user,u=e.setUser,f=Object(ge.default)(["kfc"]),O=l()(f,3),x=O[0],y=O[1],p=O[2],v=Object(s.useState)(""),C=l()(v,2),S=C[0],I=C[1],W=Object(s.useState)(""),D=l()(W,2),P=D[0],k=D[1],E=Object(s.useState)(!1),R=l()(E,2),z=R[0],A=R[1];Object(s.useEffect)((function(){console.log("cookie:",x.kfc)}),[x]);var B=function(e){console.log("login run"),e.preventDefault();i.post("auth/",{username:S,password:P}).then((function(e){return e.data})).then((function(e){console.log("token:",e),y("kfc",e.token),y("username",S),c(!1),c(!1),i("current_user/",{headers:{Authorization:"Token "+e.token}}).then((function(e){return e.data})).then((function(e){u(e),console.log("User:",e),Object.keys(e).includes("detail")||(c(!1),console.log("Already login"))}))}))};var H=function(){var e=h()((function*(e){e.preventDefault(),console.log("register run: "+S+" and password");var t=o+"register/";(yield i.post(t,{username:S,password:P},{headers:{Authorization:"Token "+x}})).data;console.log(e),B(e)}));return function(t){return e.apply(this,arguments)}}();function N(){A(!z)}return console.log(r),r?Object(w.jsx)(g.default,{style:n.homeContainer,showsVerticalScrollIndicator:!1,children:Object(w.jsxs)(j.default,{children:[Object(w.jsx)(Z.default,{placeholder:"Username",value:S,onChangeText:I,style:{width:me,minHeight:50,marginBottom:5,backgroundColor:"#d0d5db"}}),Object(w.jsx)(Z.default,{secureTextEntry:!0,placeholder:"Password",value:P,onChangeText:k,style:{width:me,minHeight:50,marginBottom:5,backgroundColor:"#d0d5db"}}),z?Object(w.jsx)(b.default,{onPress:H,style:{width:"50%",backgroundColor:"chartreuse",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",paddingBottom:10,paddingTop:10,borderRadius:6},children:Object(w.jsx)(m.default,{style:{fontSize:16,fontWeight:500},children:"Register"})}):Object(w.jsx)(b.default,{onPress:B,style:{width:"50%",backgroundColor:"chartreuse",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",paddingBottom:10,paddingTop:10,borderRadius:6},children:Object(w.jsx)(m.default,{style:{fontSize:16,fontWeight:500},children:"Login"})}),z?Object(w.jsx)(b.default,{onPress:N,style:{paddingTop:15},children:Object(w.jsx)(m.default,{style:{fontSize:16,fontWeight:500},children:"Already have an account? Sign in"})}):Object(w.jsx)(b.default,{onPress:N,style:{paddingTop:15},children:Object(w.jsx)(m.default,{style:{fontSize:16,fontWeight:500},children:"Don't have an account? Sign up"})})]})}):Object(w.jsxs)(g.default,{style:n.homeContainer,showsVerticalScrollIndicator:!1,children:[Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{children:"Username:"}),Object(w.jsx)(m.default,{children:d.username})]}),Object(w.jsxs)(j.default,{children:[Object(w.jsx)(m.default,{children:"Email:"}),Object(w.jsx)(m.default,{children:d.email})]}),Object(w.jsx)(b.default,{onPress:function(){a.navigate("Cart")},children:Object(w.jsx)(m.default,{children:"Transaction History"})}),Object(w.jsx)(b.default,{onPress:function(){p("kfc"),p("username"),c(!0)},style:{width:"50%",backgroundColor:"chartreuse",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",paddingBottom:10,paddingTop:10,borderRadius:6,marginTop:5},children:Object(w.jsx)(m.default,{style:{fontSize:16,fontWeight:500},children:"Logout"})})]})}),me=x.default.get("window").width,Oe=(x.default.get("window").height,O.default.create({centeredView:{},modalView:{backgroundColor:"white",borderRadius:20,height:"100%",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:20},shadowOpacity:.25,shadowRadius:4,elevation:5},button:{width:"95%",borderRadius:5,padding:10,elevation:2},buttonOpen:{backgroundColor:"#F194FF"},buttonClose:{backgroundColor:"#2196F3"},textStyle:{color:"white",fontWeight:"bold",textAlign:"center"},modalText:{flexDirection:"row",alignItems:"center",marginBottom:15,borderBottomColor:"gray",borderBottomWidth:1,width:"100%",paddingTop:20,paddingLeft:7,paddingRight:7},modalInnerText:{fontWeight:"bold",fontSize:14,flexGrow:1,textAlign:"left"},modalChoosingText:{color:"green",fontWeight:"bold",fontSize:14}}),n(84)),xe=function(e){var t,n,o=e.order,i=void 0===o?{}:o,r=e.orders,c=void 0===r?[]:r,a=e.setOrders,d=Object(H.useNavigation)(),u=Object(s.useState)(1),f=l()(u,2),h=f[0],g=f[1],O=Object(s.useState)(0),x=l()(O,2),y=x[0],p=x[1];return Object(s.useEffect)((function(){g(i.amount),p(i.price)}),[i]),Object(s.useEffect)((function(){if(h!=i.amount){i.amount=h;var e=c.find((function(e){return e.id==i.id})),t=c.indexOf(e),n=JSON.parse(JSON.stringify(c));try{n.splice(t,1,i),console.log("order:",i)}finally{a(n)}}}),[h]),0==Object.keys(i).length?Object(w.jsx)(j.default,{children:Object(w.jsx)(m.default,{children:"There are nothing here"})}):Object(w.jsxs)(j.default,{style:{borderWidth:1,borderColor:"red"},children:[Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsx)(m.default,{style:{flexGrow:1,fontWeight:600,fontFamily:"National2Condensed",textTransform:"uppercase",marginBottom:"1rem",fontSize:26},children:null==i||null==(t=i.categoryDish)?void 0:t.name.toUpperCase()}),Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsx)(b.default,{onPress:function(){d.navigate("EditCart",{order:i})},children:Object(w.jsx)(B.default,{name:"edit",size:24,color:"black"})}),Object(w.jsx)(b.default,{onPress:function(){var e=c.filter((function(e){return e.id!=i.id}));a(e)},children:Object(w.jsx)(B.default,{name:"highlight-remove",size:24,color:"black"})})]})]}),Object(w.jsx)(j.default,{children:null==(n=i.itemsChosen)?void 0:n.map((function(e,t){return Object(w.jsxs)(m.default,{children:["\u30fb",e.name]},t)}))}),Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsxs)(j.default,{style:{flexDirection:"row",flexGrow:1},children:[Object(w.jsx)(b.default,{onPress:function(){h>1&&g(h-1)},children:Object(w.jsx)(m.default,{style:{transform:"scale(1.5)"},children:"\u2296"})}),Object(w.jsx)(Z.default,{style:{width:30,fontSize:18,paddingLeft:5,paddingRight:5},value:h,onChangeText:g}),Object(w.jsx)(b.default,{onPress:function(){g(h+1)},children:Object(w.jsx)(m.default,{style:{transform:"scale(1.5)"},children:"\u2295"})})]}),Object(w.jsx)(m.default,{style:{fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600,alignSelf:"center"},children:h*y})]})]})},ye=x.default.get("window").width,we=x.default.get("window").height,pe=O.default.create({centeredView:{},modalView:{paddingLeft:ye>1e3?(ye-1e3)/2:5,paddingRight:ye>1e3?(ye-1e3)/2:5,height:we,width:"100%",backgroundColor:"white",borderRadius:20,flexDirection:"column",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:20},shadowOpacity:.25,shadowRadius:4,elevation:5},button:{width:"95%",borderRadius:5,padding:10,elevation:2},buttonOpen:{backgroundColor:"#F194FF"},buttonClose:{backgroundColor:"#2196F3"},textStyle:{color:"white",fontWeight:"bold",textAlign:"center"},modalText:{flexDirection:"row",alignItems:"center",marginBottom:15,borderBottomColor:"gray",borderBottomWidth:1,width:"100%",paddingTop:20,paddingLeft:7,paddingRight:7},modalInnerText:{fontWeight:"bold",fontSize:14,flexGrow:1,textAlign:"left"},modalChoosingText:{color:"green",fontWeight:"bold",fontSize:14}}),ve=function(e){var t=e.showHistory,n=e.setShowHistory,o=T(),i=o.style,r=o.customAxios,c=o.token,a=Object(s.useState)([]),d=l()(a,2),u=d[0],f=d[1];function h(e){var t=0;try{null==e||e.map((function(e){return t+=e.price*e.amount}))}finally{return t}}return Object(s.useEffect)((function(){t&&r("order/",{headers:{Authorization:"Token "+c}}).then((function(e){return e.data})).then((function(e){f(e),console.log("allOrders:",e)}))}),[t]),0==u.length?Object(w.jsx)(Oe.default,{animationType:"slide",transparent:!0,visible:t,onRequestClose:function(){n(!t)},children:Object(w.jsx)(j.default,{children:Object(w.jsxs)(g.default,{showsVerticalScrollIndicator:!1,style:i.homeContainer,children:[Object(w.jsx)(m.default,{children:"You have not ordered anything"}),Object(w.jsx)(b.default,{onPress:function(){n(!t)},style:{width:ye/2,backgroundColor:"green",color:"rgb(232, 230, 227) !important",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",paddingBottom:15,paddingTop:15,borderRadius:8,marginTop:20},children:Object(w.jsx)(m.default,{children:"Close Modal"})})]})})}):Object(w.jsx)(Oe.default,{animationType:"slide",transparent:!0,visible:t,onRequestClose:function(){n(!t)},children:Object(w.jsxs)(j.default,{style:pe.modalView,children:[Object(w.jsx)(g.default,{showsVerticalScrollIndicator:!1,style:[i.homeContainer,{flexGrow:1}],children:null==u?void 0:u.map((function(e,t){return Object(w.jsxs)(j.default,{style:{borderColor:"red",borderBottomWidth:1,marginBottom:10,paddingBottom:20},children:[Object(w.jsx)(j.default,{children:e.orders.map((function(t){var n,o;return Object(w.jsxs)(j.default,{style:{paddingBottom:5},children:[Object(w.jsx)(m.default,{style:{flexGrow:1,fontWeight:600,fontFamily:"National2Condensed",textTransform:"uppercase",fontSize:26,marginBottom:10},children:null==t||null==(n=t.categoryDish)?void 0:n.name.toUpperCase()}),Object(w.jsx)(j.default,{children:null==(o=t.itemsChosen)?void 0:o.map((function(e,t){return Object(w.jsxs)(m.default,{children:["\u30fb",e.name]},t)}))}),Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsxs)(m.default,{style:{flexGrow:1},children:[e.orders.length," Items"]}),Object(w.jsx)(m.default,{children:t.amount*t.price})]})]},t.id)}))}),Object(w.jsxs)(j.default,{style:{flexDirection:"row",paddingTop:20},children:[Object(w.jsx)(m.default,{style:{flexGrow:1,fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600},children:"SUBTOTAL"}),Object(w.jsx)(m.default,{style:{fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600,color:"red"},children:h(e.orders)})]})]},t)}))}),Object(w.jsx)(b.default,{onPress:function(){n(!t)},style:{width:"100%",backgroundColor:"green",paddingBottom:15,paddingTop:15,borderRadius:8,marginTop:5,textAlign:"center"},children:Object(w.jsx)(m.default,{style:{color:"rgb(232, 230, 227) !important",fontWeight:"bold",textTransform:"uppercase"},children:"GO BACK"})})]})})},Ce=function(e){var t=e.modalVisible,n=e.navigation,o=e.route,i=e.showHistory,r=e.setShowHistory,c=o.params.dish,a=T(),d=a.style,u=a.token,f=a.customAxios,O=Object(s.useState)([]),x=l()(O,2),y=x[0],p=x[1],v=Object(s.useState)(""),C=l()(v,2),S=C[0],I=C[1],W=Object(s.useState)(""),D=l()(W,2),P=D[0],k=D[1];Object(s.useEffect)((function(){console.log("dish",c),console.log("cookie:",u.kfc)}),[u,c]);var E=function(){var e=h()((function*(){var e=null==y?void 0:y.map((function(e){return{order:e,promotion:P}})),t={orders:y,orderDetails:e};(yield f.post("order/",{data:t},{headers:{Authorization:"Token "+u}})).data;p([])}));return function(){return e.apply(this,arguments)}}();function R(){var e=0;try{null==y||y.map((function(t){return e+=t.price*t.amount}))}finally{return e}}return Object(s.useEffect)((function(){!function(){var e=y.find((function(e){return e.id==c.id}));if(void 0!=c)if(void 0===e)p([].concat(A()(y),[c]));else{var t=y.indexOf(e),n=JSON.parse(JSON.stringify(y));try{n.splice(t,1,c)}finally{p(n)}}}()}),[c]),Object(s.useEffect)((function(){console.log("orders:",y)}),[y]),t?Object(w.jsx)(g.default,{style:d.homeContainer,showsVerticalScrollIndicator:!1,children:Object(w.jsx)(b.default,{onPress:function(){n.navigate("Settings")},style:{width:"50%",backgroundColor:"chartreuse",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",paddingBottom:10,paddingTop:10,borderRadius:6},children:Object(w.jsx)(m.default,{style:{fontSize:16,fontWeight:500},children:"LOGIN FIRST"})})}):0==y.length?Object(w.jsxs)(g.default,{style:d.homeContainer,showsVerticalScrollIndicator:!1,children:[Object(w.jsx)(ve,{showHistory:i,setShowHistory:r}),Object(w.jsx)(m.default,{style:{},children:"Your Cart is empty?"}),Object(w.jsx)(m.default,{children:"Making order to enjoy KFC special secret recipes"}),Object(w.jsx)(b.default,{style:{width:"50%",backgroundColor:"green",color:"rgb(232, 230, 227) !important",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",paddingBottom:15,paddingTop:15,borderRadius:8,marginTop:20},onPress:function(){n.navigate("Main")},children:Object(w.jsx)(m.default,{style:{color:"chartreuse"},children:"ORDER NOW"})}),Object(w.jsx)(b.default,{style:{width:"100%",backgroundColor:"green",color:"rgb(232, 230, 227) !important",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",paddingBottom:15,paddingTop:15,borderRadius:8,position:"fixed",bottom:0},onPress:function(){r(!0)},children:Object(w.jsx)(m.default,{style:{color:"chartreuse"},children:"ORDER HISTORY"})})]}):Object(w.jsxs)(g.default,{style:d.homeContainer,showsVerticalScrollIndicator:!1,children:[Object(w.jsx)(Oe.default,{animationType:"slide",transparent:!0,visible:i,onRequestClose:function(){r(!i)},children:Object(w.jsx)(ve,{showHistory:i,setShowHistory:r})}),Object(w.jsx)(m.default,{style:{backgroundColor:"rgb(182, 0, 34)",color:"rgb(232, 230, 227) !important",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",width:"100%",paddingBottom:15,paddingTop:15,borderRadius:8},children:"PROCEED TO PAYMENT"}),null==y?void 0:y.map((function(e){return Object(w.jsx)(xe,{order:e,orders:y,setOrders:p},e.id)})),Object(w.jsx)(Z.default,{style:{width:Se,minHeight:50,marginBottom:20,backgroundColor:"#d0d5db"},placeholder:"Notes for your order",value:S,onChangeText:I}),Object(w.jsxs)(j.default,{style:{width:"100%"},children:[Object(w.jsxs)(j.default,{style:{flexDirection:"row"},children:[Object(w.jsxs)(m.default,{style:{flexGrow:1,fontWeight:600},children:[y.length," Items"]}),Object(w.jsx)(m.default,{style:{fontSize:20,fontFamily:"National2",lineHeight:1.5,fontWeight:600,alignSelf:"center"},children:R()})]}),Object(w.jsxs)(j.default,{style:{flexDirection:"row",paddingBottom:20,alignItems:"center"},children:[Object(w.jsx)(j.default,{style:{flexGrow:1,minHeight:50},children:Object(w.jsx)(Z.default,{style:{width:"100%",minHeight:50,backgroundColor:"#d0d5db"},value:P,onChangeText:k,placeholder:"Enter promotion code"})}),Object(w.jsx)(b.default,{style:{borderWidth:1,borderColor:"gray",height:50,alignSelf:"center",flexDirection:"column",justifyContent:"center"},children:Object(w.jsx)(m.default,{style:{padding:5,fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600},children:"APPLY CODE"})})]}),Object(w.jsxs)(j.default,{style:{flexDirection:"row",paddingBottom:20},children:[Object(w.jsx)(m.default,{style:{flexGrow:1,fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600},children:"SUBTOTAL"}),Object(w.jsx)(m.default,{style:{fontSize:18,fontFamily:"National2",lineHeight:1.5,fontWeight:600,color:"red"},children:R()})]}),Object(w.jsxs)(j.default,{style:{position:"fixed",bottom:0,width:"100%"},children:[Object(w.jsxs)(j.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(w.jsx)(b.default,{onPress:function(){n.navigate("Main")},style:{width:"49%",paddingBottom:15,paddingTop:15,borderRadius:8,backgroundColor:"rgb(182, 0, 34)"},children:Object(w.jsx)(m.default,{style:{color:"rgb(232, 230, 227) !important",fontWeight:"bold",textTransform:"uppercase",textAlign:"center"},children:"CONTINUE ORDERING"})}),Object(w.jsx)(b.default,{onPress:E,style:{width:"49%",paddingBottom:15,paddingTop:15,borderRadius:8,backgroundColor:"rgb(182, 0, 34)"},children:Object(w.jsx)(m.default,{style:{color:"rgb(232, 230, 227) !important",fontWeight:"bold",textTransform:"uppercase",textAlign:"center"},children:"SEND ORDER"})})]}),Object(w.jsx)(b.default,{onPress:function(){r(!0)},children:Object(w.jsx)(m.default,{style:{backgroundColor:"green",color:"rgb(232, 230, 227) !important",fontWeight:"bold",textTransform:"uppercase",textAlign:"center",paddingBottom:15,paddingTop:15,borderRadius:8,marginTop:5},children:"ORDER HISTORY"})})]})]})]})},Se=x.default.get("window").width,Ie=(x.default.get("window").height,O.default.create({centeredView:{},modalView:{backgroundColor:"white",borderRadius:20,height:"100%",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:20},shadowOpacity:.25,shadowRadius:4,elevation:5},button:{width:"95%",borderRadius:5,padding:10,elevation:2},buttonOpen:{backgroundColor:"#F194FF"},buttonClose:{backgroundColor:"#2196F3"},textStyle:{color:"white",fontWeight:"bold",textAlign:"center"},modalText:{flexDirection:"row",alignItems:"center",marginBottom:15,borderBottomColor:"gray",borderBottomWidth:1,width:"100%",paddingTop:20,paddingLeft:7,paddingRight:7},modalInnerText:{fontWeight:"bold",fontSize:14,flexGrow:1,textAlign:"left"},modalChoosingText:{color:"green",fontWeight:"bold",fontSize:14}}),n(272));function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=Object(d.default)();t.default=function(){var e=Object(s.useState)(!0),t=l()(e,2),n=t[0],o=t[1],i=Object(s.useState)(!1),r=l()(i,2),c=r[0],d=r[1],f=Object(s.useState)([]),h=l()(f,2),j=h[0],g=h[1];return Object(s.useEffect)((function(){console.log("Check login"),console.log("/api/v1/",C),Object(y.default)("/api/v1/current_user/",{headers:{Authorization:"Token "+C}}).then((function(e){return e.data})).then((function(e){g(e),console.log("User:",e),Object.keys(e).includes("detail")||(o(!1),console.log("Already login"))}))}),[C]),Object(w.jsx)(Ie.default,{children:Object(w.jsx)(W,{children:Object(w.jsx)(a.default,{children:Object(w.jsxs)(De.Navigator,{initialRouteName:"Main",screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){var n,o=e.focused,i=e.color,r=e.size,l=t.name;return"Main"===l?n=o?"home":"home-outline":"Cart"===l?n=o?"cart":"cart-outline":"Settings"===l&&(n=o?"settings":"settings-outline"),Object(w.jsx)(u.default,{name:n,size:r,color:i})},headerShown:!1,headerStyle:{backgroundColor:"papayawhip"},labelStyle:{paddingBottom:10,fontSize:10},style:{padding:10,height:70}}},children:[Object(w.jsx)(De.Screen,{name:"Main",component:je}),Object(w.jsx)(De.Screen,{name:"Cart",children:function(e){return Object(w.jsx)(Ce,Te(Te({},e),{},{modalVisible:n,setModalVisible:o,showHistory:c,setShowHistory:d}))},initialParams:{dish:void 0}}),Object(w.jsx)(De.Screen,{name:"Settings",children:function(e){return Object(w.jsx)(be,Te(Te({},e),{},{modalVisible:n,setModalVisible:o,user:j,setUser:g,showHistory:c,setShowHistory:d}))}})]})})})})}},198:function(e,t,n){e.exports=n(251)}},[[198,1,2]]]);
//# sourceMappingURL=app.22f4d59a.chunk.js.map